# SteamIdlerEnhanced AI Coding Guidelines

## Architecture Overview
This is a Qt6-based GUI application for idling Steam games to earn achievements/cards. Key components:
- **GameBrowser**: Main QWidget with search bar, results display, and sidebar (inherits from QWidget)
- **ProcessManager**: Manages idle sessions using QProcess, system tray integration
- **GameSearch**: SQLite-based search engine for Steam app data
- **ghost_launcher**: Separate Win32 executable that initializes Steam API and keeps processes alive
- **AppConfig**: Singleton for persistent settings using QSettings

Data flows: JSON app list → migrate.py → SQLite DB → GameSearch → GameBrowser → ProcessManager → isolated AppData dirs with ghost_launcher.

## Build & Development Workflow
- **Setup**: Run `python migrate.py` to populate SQLite DB from `data/app_list.json`
- **Build**: Use `rebuild.bat` (cleans, configures CMake with Ninja, builds Debug)
- **Qt Deployment**: CMake auto-runs `windeployqt` to copy DLLs on Windows
- **Debugging**: Logs to `logs/session.log` and console via spdlog async logger

## Key Patterns & Conventions
- **Logging**: Use `Logger::log()->info("message {}", var)` for all logging (spdlog with console + file sinks)
- **Persistence**: Store app state in `AppConfig::instance()` (QSettings-based singleton)
- **Process Isolation**: Each idle session runs in `AppDataLocation/ghost/{appId}/` with copied `steam_api64.dll` and `steam_appid.txt`
- **Qt Resources**: Styles in `:/resources/styles.qss`, loaded in main.cpp
- **Signals/Slots**: Use Qt's signal-slot mechanism for component communication (e.g., ProcessManager emits `sessionsChanged()`)

## Dependencies & Integration
- **Qt6**: Widgets, Sql, Concurrent, Network (linked in CMakeLists.txt)
- **spdlog**: Header-only in `include/spdlog/`, initialized in Logger::init()
- **SQLite**: Via Qt's QSqlDatabase, schema: `games(appid PRIMARY KEY, name TEXT)` with name index
- **Steam API**: Dynamically loaded in ghost_launcher via `LoadLibraryA("steam_api64.dll")`

## Common Tasks
- **Add new game data**: Update `data/app_list.json`, run migrate.py
- **Modify UI**: Edit GameBrowser.cpp/setupUi(), styles in `assets/style.qss`
- **Add logging**: Include "Logger.h", use `Logger::log()->level("msg")`
- **Persist settings**: Access via `AppConfig::instance().property = value; instance().save();`

## File Structure Highlights
- `src/`: .cpp implementations
- `include/`: Headers with class definitions
- `data/`: app_list.json (source), app_data.db (runtime)
- `resources.qrc`: Qt resource file for styles/assets
- `build/`: CMake build artifacts (regenerated by rebuild.bat)